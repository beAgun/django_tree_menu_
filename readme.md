# Реализация древовидного меню

## Краткое описание 
Данная реализация позволяет отрисовать древовидное меню в шаблоне любой страницы
с использованием **template tag draw_menu**, то есть с помощью синтаксиса 
`{% draw_menu 'Menu_name' %}`,
где 'Menu_name' - это название головного (необязательно) пункта меню.
Пункты, подпункты меню можно добавлять, редактировать в панели администрирования.

## Особенности реализации
Допустим, что у нас есть следующая структура:

```

    Одежда
        Для детей
            ...
        Для женщин
            ...
        Для мужчин
            ...
    Косметика
        Уходовая
            ...
        Декоративная
            ...
            
```
- Такую структуру можно отобразить с помощью тега `{% draw_menu 'Menu_name' %}`.
Вместо **'Menu_name'** можно подставить **'Одежда'** или **'Косметика'** 
(корневые пункты меню/названия меню), если написать любой из других существующих 
пунктов, его подменю не будет отображено.
Если вместо **'Menu_name'** написать несуществующие пункты, то они 
не повлияют на работу программы и ничего не отобразится для таких пунктов.

- Меню отображается так, что всё, что над выделенным пунктом - развёрнуто. 
Первый уровень вложенности под выделенным пунктом тоже развёрнут.

- Меню хранится в базе данных, его структуру описывает **модель Menu** в файле
`tree_menu_site/tree_menu/models.py`, в которой определены поля:
  - **id**
  - **name** - название пункта, считается уникальным
  - **slug** - уникальный слаг
  - **parent** - id родительского пункта, в которой вложен текущий пункт меню.
  - **root** - id корня/название меню 
 
- Меню редактируется в панели администрирования, для чего создан **класс MenuAdmin**
в файле `tree_menu_site/tree_menu/admin.py`.
Добавлена валидация для ситуации, если пользователь ошибочно захочет сделать 
подпункт для отдельного пункта меню его родительским пунктом - для этого определена
**форма MenuForm** в файле `tree_menu_site/tree_menu/forms.py` и 
переопределён метод **clean**.

- Для отрисовки меню используется **template tag draw_menu**, который реализован 
в файле `tree_menu_site/tree_menu/templatetags/tree_menu_tags.py`. Для отображения
небольшой (предполагается, что в меню десятки записей, не больше) 
древовидной структуры, которая хранится в реляционной БД, был сделан выбор в пользу 
прочтения записей, отфильтрованных по названию меню (один запрос к БД) 
и обработки их вложенности на языке программирования.

- По клику на пункт меню происходит переход по заданному в нём URL. URL состоит из
слагов всех родительских пунктов по порядку, а завершающий слаг соответствует активному пункту.


Имя суперпользователя: root.
Пароль: 0000